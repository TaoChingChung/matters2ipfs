(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5087:function(e,t,a){e.exports=a(5124)},5092:function(e,t,a){},5123:function(e,t,a){},5124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),o=a.n(s),c=(a(5092),a(5154)),i=a(5173),l=a(5158),p=a(38),u=a(5159),h=a(30),m=a.n(h),d=a(41),f=a(15),g=a(49),b=a(5160),E=a(5175),y=a(5162),v=a(5163),w=a(5165),k=a(5161),C=a(5166),j=a(5167),x=a(5168),O=a(5171),N=a(5172),B=a(5157),S=a(5125),A=a(5177),R=a(5178),U=a(53),I=a(51),H=a(5164),T=a(5169),z=a(5170),D=a(42),F=a.n(D),L=[{url:"https://cors-anywhere.herokuapp.com/"},{url:"https://api.allorigins.win/raw?url=",needEncode:!0},{url:"https://jsonp.afeld.me/?url=",needEncode:!0}],P=a(73),W=a.n(P);var _=function(e){if(!e)return!0;try{return new URL(e),!0}catch(t){return!1}},G=function(e){if(e.indexOf("matters.news")<0)return"";var t=new URL(e),a=new W.a("/@:author/:id").match(t.pathname);if(a&&a.id){var n=a.id.match(/.+-(.+)/);return n&&n[1]?n[1].split("#")[0]:""}return""},q=function(){var e=Object(d.a)(m.a.mark(function e(t){var a,n,r,s,o,c,i,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.mediaHash){e.next=20;break}return a=t.corsIndex,n=a>=0&&a<L.length?a:Math.floor(Math.random()*L.length),r=t.cors?{url:t.cors,needEncode:t.corsNeedEncode}:L[n],"https://server.matters.news/graphql",s='\n    query {\n      article(input: { mediaHash: "'.concat(t.mediaHash,'" }) {\n        dataHash\n      }\n    }\n  '),o="".concat("https://server.matters.news/graphql","?query=").concat(encodeURIComponent(s)),c="".concat(r.url).concat(o),r.needEncode&&(c="".concat(r.url).concat(encodeURIComponent(o))),i=Object.assign({},t.config),e.next=12,F.a.get(c,i);case 12:if(200!==(l=e.sent).status||!l.data||!l.data.data){e.next=17;break}return e.abrupt("return",l.data.data);case 17:throw new Error("Can't get data hash, this may cause by matters server change their api, please let me know.");case 18:e.next=21;break;case 20:throw new Error("Can't found mediaHash");case 21:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),J=a(84),M=a(3),Q=a(50),V=a(5155),X=a(78),Y=a.n(X),Z=a(74),$=a.n(Z),K=a(79),ee=a.n(K),te=a(77),ae=a.n(te),ne=a(80),re=a.n(ne),se=a(5156),oe={success:$.a,warning:ae.a,error:Y.a,info:ee.a},ce=Object(c.a)(function(e){return{success:{backgroundColor:Q.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:V.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}});function ie(e){var t=ce(),a=e.className,n=e.message,s=e.onClose,o=e.variant,c=Object(J.a)(e,["className","message","onClose","variant"]),i=oe[o];return r.a.createElement(se.a,Object.assign({className:Object(M.a)(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(i,{className:Object(M.a)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(B.a,{key:"close","aria-label":"Close",color:"inherit",onClick:s},r.a.createElement(re.a,{className:t.icon}))]},c))}var le=["https://ninetailed.ninja/ipfs/:hash","https://ipfs.eternum.io/ipfs/:hash","https://hardbin.com/ipfs/:hash","https://gateway.pinata.cloud/ipfs/:hash","https://siderus.io/ipfs/:hash","https://ipfstube.erindachtler.me/ipfs/:hash","https://ipfs.io/ipfs/:hash","https://gateway.ipfs.io/ipfs/:hash","https://ipfs.infura.io/ipfs/:hash","https://ipfs.privacytools.io/ipfs/:hash","https://d26g9c7mfuzstv.cloudfront.net/ipfs/:hash","https://eu.siderus.io/ipfs/:hash","https://na.siderus.io/ipfs/:hash","https://ap.siderus.io/ipfs/:hash","https://ipfs.wa.hle.rs/ipfs/:hash","https://ipfs.sloppyta.co/ipfs/:hash","https://ipfs.busy.org/ipfs/:hash","https://ipfs.greyh.at/ipfs/:hash","https://gateway.serph.network/ipfs/:hash","https://ipfs.fooock.com/ipfs/:hash","https://cdn.cwinfo.net/ipfs/:hash","https://gateway.temporal.cloud/ipfs/:hash","https://ipfs.jes.xxx/ipfs/:hash","https://cloudflare-ipfs.com/ipfs/:hash","https://upload.global/ipfs/:hash","https://catalunya.network/ipfs/:hash","https://ipfs.works/ipfs/:hash","https://api.wisdom.sh/ipfs/:hash","https://ipfs.macholibre.org/ipfs/:hash","https://ipns.co/:hash","https://ipfs.netw0rk.io/ipfs/:hash","https://gateway.swedneck.xyz/ipfs/:hash","https://ipfs.mrh.io/ipfs/:hash","https://gateway.originprotocol.com/ipfs/:hash","https://ipfs.dapps.earth/ipfs/:hash","https://ipfs.doolta.com/ipfs/:hash","https://rx14.co.uk/ipfs/:hash","https://ipfs.globalupload.io/ipfs/:hash","https://ipfs.renehsz.com/ipfs/:hash","https://gateway.blocksec.com/ipfs/:hash","https://jorropo.ovh/ipfs/:hash"],pe=(a(5123),Object(c.a)(function(e){var t;return t={root:{paddingBottom:30},button:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},buttonGrow:{flexGrow:1},buttonBox:{},input:{display:"none"},buttonIcon:{marginRight:e.spacing(1)},formControl:{marginRight:e.spacing(4),minWidth:120},listItem:{wordBreak:"break-all"},buttonSplit:{flex:1},legend:{color:"rgba(0, 0, 0, 0.38)"},loading:{margin:e.spacing(4),display:"flex",justifyContent:"center"},divider:{marginTop:e.spacing(4),marginBottom:e.spacing(4)},close:{padding:e.spacing(.5)},error:{backgroundColor:"red"},heroContent:{padding:e.spacing(8,0,6)},buttonRight:{marginLeft:e.spacing(4)},space:{marginLeft:e.spacing(1)},priButton:{justifyContent:"flex-end"},center:{display:"flex",justifyContent:"center",alignItems:"center"},centerButton:{marginTop:e.spacing(4),justifyContent:"center"},overAvatar:{minWidth:0,paddingRight:e.spacing(1)},subheader:{top:"auto",zIndex:"auto",position:"static"},inputRoot:{marginTop:e.spacing(2),marginBottom:e.spacing(4),padding:"2px 4px",display:"flex",alignItems:"center"}},Object(g.a)(t,"input",{marginLeft:8,flex:1}),Object(g.a)(t,"iconButton",{padding:10}),Object(g.a)(t,"inputDivider",{width:1,height:28,margin:4}),t})),ue=1;function he(){var e=pe(),t=new URLSearchParams(window.location.search),a=t.get("url")||"",s=t.get("checked_cors")||"",o=t.get("cors")||"",c=t.get("cors_need_encode")||0,i=t.get("cors_index")||null,h=Object(n.useState)(!1),g=Object(f.a)(h,2),D=g[0],L=g[1],P=Object(n.useState)(""),W=Object(f.a)(P,2),J=W[0],M=W[1],Q=Object(n.useState)(""),V=Object(f.a)(Q,2),X=V[0],Y=V[1],Z=Object(n.useState)(""),$=Object(f.a)(Z,2),K=$[0],ee=$[1],te=Object(n.useState)(!1),ae=Object(f.a)(te,2),ne=ae[0],re=ae[1],se=Object(n.useState)({id:ue,count:0,checkedCount:0,onlineCount:0,offlineCount:0}),oe=Object(f.a)(se,2),ce=oe[0],he=oe[1],me=Object(n.useState)({}),de=Object(f.a)(me,2),fe=de[0],ge=de[1],be=function(e){return!_(e)},Ee=Object(n.useState)(!1),ye=Object(f.a)(Ee,2),ve=ye[0],we=ye[1],ke=Object(n.useState)(!1),Ce=Object(f.a)(ke,2),je=Ce[0],xe=Ce[1],Oe=Object(n.useState)(!1),Ne=Object(f.a)(Oe,2),Be=Ne[0],Se=Ne[1],Ae=Object(n.useState)(be(J)),Re=Object(f.a)(Ae,2),Ue=Re[0],Ie=Re[1],He=Object(n.useState)(""),Te=Object(f.a)(He,2),ze=Te[0],De=Te[1],Fe=function(e){if(e){for(var t={},a=0;a<le.length;a++){var n=le[a].replace(":hash",e),r=s+n,o=r+"#x-ipfs-companion-no-redirect";t[r]={displayUrl:r,requestUrl:o,status:"checking"}}ge(t);var c=Object.keys(t);he(function(e){return{count:c.length,checkedCount:0,onlineCount:0,offlineCount:0}}),c.forEach(function(e){var a,n,r=t[e],s=Date.now(),o=ue;(a=r.requestUrl,F()(a,n).then(function(e){return"object"===typeof e.data?JSON.stringify(e.data,null,2):e.data}).catch(function(e){throw e.response&&e.response.data&&(e.message=e.response.data),e})).then(function(){var t=Date.now()-s;he(function(e){var t=Object.assign({},e);return ue===o&&(t.checkedCount++,t.onlineCount++),t}),ge(function(a){var n=Object.assign({},a);return n[e]&&ue===o&&(n[e].status="online",n[e].timeout=t),n})}).catch(function(t){he(function(e){var t=Object.assign({},e);return ue===o&&(t.checkedCount++,t.offlineCount++),t}),ge(function(a){var n=Object.assign({},a);return n[e]&&ue===o&&(n[e].status="offline",n[e].error=t.message||"Timeout!"),n})})})}},Le=function(e){var t=e.target.value,a=be(t);if(M(t),Ie(a),a)Y("");else{var n=G(t);Y(n)}};function Pe(e,t){"clickaway"!==t&&we(!1)}function We(e,t){"clickaway"!==t&&xe(!1)}var _e=function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(X){e.next=4;break}return De("Please input a valid matters article url"),xe(!0),e.abrupt("return");case 4:return ue++,L(!0),he({count:0,checkedCount:0,onlineCount:0,offlineCount:0}),ge({}),e.prev=8,t={mediaHash:X},o?(t.cors=o,"1"===c&&(t.corsNeedEncode=!0)):null!==i&&(t.corsIndex=Number(i)),e.next=13,q(t);case 13:(a=e.sent)&&a.article&&a.article.dataHash?(n=a.article.dataHash,ee(n),Fe(n)):a&&null===a.article?(De("Can't get the matters dataHash, this may cause by your matters url"),xe(!0)):(De("Can't get the matters dataHash, this may cause by our convert server error"),xe(!0)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),De(e.t0.message),xe(!0);case 21:L(!1);case 22:case"end":return e.stop()}},e,null,[[8,17]])}));return function(){return e.apply(this,arguments)}}(),Ge=function(){we(!0)};Object(n.useEffect)(function(){Be||Se(!0),!Be&&a?(re(!0),Le({target:{value:a}})):Be&&ne&&(re(!1),_e())},[Be,a,ne,Se,re,Le,_e]);var qe="".concat(window.location.protocol,"//").concat(window.location.host,"/?url=").concat(encodeURIComponent(J));return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.heroContent},r.a.createElement(l.a,{maxWidth:"md"},r.a.createElement(p.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"Convert"," ",r.a.createElement(u.a,{href:"https://matters.news",target:"_blank",rel:"noopener noreferrer"},"Matters")," ","to"," ",r.a.createElement(u.a,{href:"https://contributionls.github.io/public-gateway-checker/",target:"_blank",rel:"noopener noreferrer"},"IPFS")))),r.a.createElement(b.a,null,r.a.createElement(E.a,{id:"url",required:!0,autoFocus:!0,inputProps:{autoComplete:"off"},label:"Matters Article Url",type:"url",placeholder:"https://matters.news/@leungkaichihk/%E9%A6%99%E6%B8%AF%E7%AC%AC%E4%B8%80%E8%AA%B2-%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%9B%AE%E9%8C%84-zdpuB2J818r8yUSDeZ4vDARrnQ4ut3S2UYjALXHJ16jp25w4P",onChange:Le,value:J,variant:"outlined",margin:"normal",error:Ue,helperText:Ue?"URL is invalid!":""}),r.a.createElement(b.a,{row:!0,className:e.centerButton},r.a.createElement(y.a,{onClick:_e,color:"primary",size:"large",variant:"outlined",disabled:D,className:"".concat(e.button)},D?r.a.createElement(v.a,{size:20,color:"inherit",className:e.buttonIcon}):r.a.createElement(H.a,{fontSize:"small",className:e.buttonIcon}),"Convert"),r.a.createElement(y.a,{onClick:function(){Le({target:{value:"https://matters.news/@leungkaichihk/%E9%A6%99%E6%B8%AF%E7%AC%AC%E4%B8%80%E8%AA%B2-%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%9B%AE%E9%8C%84-zdpuB2J818r8yUSDeZ4vDARrnQ4ut3S2UYjALXHJ16jp25w4P"}}),re(!0)},variant:"outlined",color:"default",size:"large",className:"".concat(e.button," ").concat(e.buttonRight)},"Example")),K?r.a.createElement("div",null,r.a.createElement(w.a,{className:e.divider}),r.a.createElement(k.a,{"aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(C.a,{component:"div",className:e.subheader,id:"nested-list-subheader"},ce.checkedCount,"/",ce.count," gateways,"," ",ce.onlineCount," are online,"," ",ce.offlineCount," are offline"),dense:!1},Object.keys(fe).map(function(e){return fe[e]}).map(function(t,a){return r.a.createElement(j.a,{key:"key_".concat(a)},r.a.createElement(x.a,{className:"".concat(e.center," ").concat(e.overAvatar)},r.a.createElement("div",null,"init"===t.status?r.a.createElement(T.a,{color:"disabled"}):null,"checking"===t.status?r.a.createElement(v.a,{size:20,color:"secondary",className:e.buttonIcon}):null,"offline"===t.status?r.a.createElement(z.a,{color:"error"}):null,"online"===t.status?r.a.createElement(I.a,{color:"primary"}):null)),r.a.createElement(O.a,{primaryTypographyProps:{className:e.listItem},primary:r.a.createElement(u.a,{target:"_blank",rel:"noopener noreferrer",href:t.displayUrl},t.displayUrl),secondary:"offline"===t.status?t.error:"online"===t.status?"".concat(t.timeout,"ms"):null}),r.a.createElement(N.a,null,r.a.createElement(U.CopyToClipboard,{text:t.displayUrl,onCopy:Ge},r.a.createElement(B.a,{edge:"end","aria-label":"copy"},r.a.createElement(I.b,null)))))})),r.a.createElement(w.a,{className:e.divider}),r.a.createElement(p.a,{variant:"h5",component:"h3"},"Want a link that automatically checks the IPFS address of the article?"),r.a.createElement(S.a,{className:e.inputRoot},r.a.createElement(A.a,{value:qe,className:e.input,placeholder:"Search Google Maps",inputProps:{"aria-label":"search google maps"}}),r.a.createElement(B.a,{className:e.iconButton,"aria-label":"copy"},r.a.createElement(U.CopyToClipboard,{text:qe,onCopy:Ge},r.a.createElement(I.b,null))))):null),r.a.createElement(R.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:ve,autoHideDuration:1500,onClose:Pe},r.a.createElement(ie,{onClose:Pe,variant:"success",message:"The url has be copied!"})),r.a.createElement(R.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:je,autoHideDuration:2500,onClose:We},r.a.createElement(ie,{onClose:We,variant:"error",message:ze})))}var me=Object(c.a)(function(e){return{root:{display:"flex",flexDirection:"column",flexGrow:1,minHeight:"100vh",backgroundColor:e.palette.background.paper},grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},link:{margin:e.spacing(1)},title:{flexGrow:1},space:{marginRight:e.spacing(1),marginLeft:e.spacing(1)},footer:{paddingTop:e.spacing(1),paddingBottom:e.spacing(2),marginTop:"auto",backgroundColor:"#f2f2f2",borderTop:"1px solid #e4e4e4",lineHeight:40},flex:{display:"flex",flexWrap:"wrap",justifyContent:"center"}}});function de(){var e=me();return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,null),r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:"sharethis-inline-share-buttons",style:{padding:10}}),r.a.createElement(l.a,{maxWidth:"md"},r.a.createElement(he,null)),r.a.createElement("footer",{className:e.footer},r.a.createElement(l.a,{maxWidth:"md"},r.a.createElement("div",{className:e.flex},r.a.createElement(p.a,{variant:"body2",className:e.space},r.a.createElement(u.a,{color:"textSecondary",href:"https://github.com/contributionls/matters2ipfs"},"Github")),r.a.createElement(p.a,{variant:"body2",className:e.space},r.a.createElement(u.a,{color:"textSecondary",href:"https://github.com/contributionls/matters2ipfs/blob/master/README.md#getting_started"},"Docs")),r.a.createElement(p.a,{variant:"body2",className:e.space},r.a.createElement(u.a,{color:"textSecondary",href:"https://github.com/contributionls/matters2ipfs/issues"},"Feedback")),r.a.createElement(p.a,{variant:"body2",className:e.space},r.a.createElement(u.a,{color:"textSecondary",href:"https://github.com/contributionls/matters2ipfs/blob/master/Terms.md"},"Terms of Use")),r.a.createElement(p.a,{variant:"body2",className:e.space},r.a.createElement(u.a,{color:"textSecondary",href:"https://github.com/contributionls/matters2ipfs/issues/new"},"Submit Gateway")),r.a.createElement(p.a,{variant:"body2",className:e.space},r.a.createElement(u.a,{color:"textSecondary",href:"https://matters.news/@deserve"},"Follow Me")))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe=a(5174),ge=a(83),be=Object(ge.a)({palette:{primary:{main:"#0d6763"},secondary:{main:"#c0a46b"}}});o.a.render(r.a.createElement(function(){return r.a.createElement(fe.a,{theme:be},r.a.createElement(de,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5087,1,2]]]);
//# sourceMappingURL=main.d7807ce8.chunk.js.map